{% extends 'base.html' %}
{% load static %}


{% block content %}
    <div class="content-wrapper">
        <div class="row">
            <div class="col-md-12 grid-margin">
                <div class="row">
                    <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                        <h3 class="font-weight-bold">Salom, {{ request.user.get_full_name }}</h3>
                        <h6 class="font-weight-normal mb-0">
                            <span class="text-primary">{{ notification }}</span>
                        </h6>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 grid-margin stretch-card">
                <div class="card tale-bg">
                    <div class="card-people mt-auto">
                        <img src="{% static 'main/images/dashboard/people.svg' %}" alt="people">
                        <div class="weather-info">
                            <div class="d-flex">
                                <div>
                                    <h2 class="mb-0 font-weight-normal"><i
                                            class="icon-sun me-2"></i>31<sup>C</sup></h2>
                                </div>
                                <div class="ms-2">
                                    <h4 class="location font-weight-normal">Farg'ona</h4>
                                    <h6 class="font-weight-normal">O'zbekiston</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 grid-margin transparent">
                <div class="row">
                    <div class="col-md-6 mb-4 stretch-card transparent">
                        <div class="card card-light-blue">
                            <div class="card-body">
                                <p class="mb-4">Barchasi</p>
                                <p class="fs-30 mb-2">{{ statistic.total }} ta</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4 stretch-card transparent">
                        <div class="card" style="background-color: #30c93e">
                            <div class="card-body">
                                <p class="mb-4">Qabul qilingan</p>
                                <p class="fs-30 mb-2">{{ statistic.accepted }} ta</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
                        <div class="card" style="background-color: #ffa941">
                            <div class="card-body">
                                <p class="mb-4">Jarayonda</p>
                                <p class="fs-30 mb-2">{{ statistic.waiting }} ta</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 stretch-card transparent">
                        <div class="card" style="background-color: #ef353b">
                            <div class="card-body">
                                <p class="mb-4">Qaytarilgan</p>
                                <p class="fs-30 mb-2">{{ statistic.cancelled }} ta</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <p class="card-title">Jarayonda...</p>
                        <div class="row">
                            <div class="col-12">
                                <div class="table-responsive">
                                    <table id="example" class="display expandable-table" style="width:100%">
                                        <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Fan</th>
                                            <th>Kafedra</th>
                                            <th>Dekan</th>
                                            <th>O'quv bo'limi</th>
                                            <th>Prorektor</th>
                                            <th>Sana</th>
                                            <th>Holat</th>
                                            <th>Amallar</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for document in waiting_documents %}
                                            <tr>
                                                <td>{{ forloop.counter }}</td>
                                                <td>{{ document.subject.name }}</td>
                                                <td>
                                                    {% if document.department_head_sign == 'waiting' %}
                                                        <span class="badge bg-warning text-dark">Kutilmoqda</span>
                                                    {% elif document.department_head_sign == 'cancelled' %}
                                                        <span class="badge bg-danger">Rad etildi</span>
                                                    {% elif document.department_head_sign == 'accepted' %}
                                                        <span class="badge bg-success">Qabul qilindi</span>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if document.dean_sign == 'waiting' %}
                                                        <span class="badge bg-warning text-dark">Kutilmoqda</span>
                                                    {% elif document.dean_sign == 'cancelled' %}
                                                        <span class="badge bg-danger">Rad etildi</span>
                                                    {% elif document.dean_sign == 'accepted' %}
                                                        <span class="badge bg-success">Qabul qilindi</span>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if document.study_head_sign == 'waiting' %}
                                                        <span class="badge bg-warning text-dark">Kutilmoqda</span>
                                                    {% elif document.study_head_sign == 'cancelled' %}
                                                        <span class="badge bg-danger">Rad etildi</span>
                                                    {% elif document.study_head_sign == 'accepted' %}
                                                        <span class="badge bg-success">Qabul qilindi</span>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if document.study_prorector_sign == 'waiting' %}
                                                        <span class="badge bg-warning text-dark">Kutilmoqda</span>
                                                    {% elif document.study_prorector_sign == 'cancelled' %}
                                                        <span class="badge bg-danger">Rad etildi</span>
                                                    {% elif document.study_prorector_sign == 'accepted' %}
                                                        <span class="badge bg-success">Qabul qilindi</span>
                                                    {% endif %}
                                                </td>

                                                <td>{{ document.created_at|date:"M d, Y" }} {{ document.created_at|time:"H:i" }}</td>

                                                <td>
                                                    {% if document.overall == 'accepted' %}
                                                        <span class="badge bg-success">Qabul qilindi</span>
                                                    {% elif document.overall == 'cancelled' %}
                                                        <span class="badge bg-danger">Rad etildi</span>
                                                    {% else  %}
                                                        <span class="badge bg-warning text-dark">Jarayonda</span>
                                                    {% endif %}
                                                </td>
                                                <td><a href="#" ><i class="fa fa-eye"></i></a> <a href="#"><i class="fa fa-edit"></i></a></td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                    {% if not waiting_documents %}
                                    	<h4 class="text-center mt-3">Hech narsa yo'q</h4>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}